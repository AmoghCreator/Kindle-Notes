---
// Site header with navigation
const pathname = Astro.url.pathname;
---

<header class="site-header">
  <div class="container">
    <nav class="nav-wrapper">
      <a href="/" class="logo">
        <svg
          class="logo-icon"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
          <path
            d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"
          ></path>
          <path d="M8 7h8"></path>
          <path d="M8 11h8"></path>
          <path d="M8 15h6"></path>
        </svg>
        <span class="logo-text">Kindle Notes</span>
      </a>

      <div class="nav-links">
        <a href="/" class="nav-link" aria-current={pathname === "/" ? "page" : undefined}>Library</a>
        <a href="/import" class="nav-link" aria-current={pathname === "/import" ? "page" : undefined}>Import</a>
        <a href="/search" class="nav-link" aria-current={pathname.startsWith("/search") ? "page" : undefined}>Search</a>
      </div>

      <div class="nav-actions">
        <button
          class="btn btn-secondary"
          onclick="window.toggleTheme()"
          data-theme-toggle
          aria-label="Toggle dark mode"
          title="Toggle dark/light mode"
        >
          <svg
            class="theme-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </button>
      </div>
    </nav>
  </div>
</header>

<style>
  .site-header {
    border-bottom: 1px solid var(--color-border);
    background: var(--color-surface);
    position: sticky;
    top: 0;
    z-index: 100;
  }

  .nav-wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-md);
    padding: 0.85rem 0;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-family: var(--font-family-secondary);
    font-weight: var(--font-weight-semibold);
    font-size: var(--font-size-base);
    color: var(--color-text-primary);
    text-decoration: none;
    transition: color var(--transition-fast);
    padding: 0.35rem 0.6rem;
    border-radius: var(--border-radius);
  }

  .logo:hover {
    color: var(--color-accent);
  }

  .logo-icon {
    width: 22px;
    height: 22px;
  }

  .nav-links {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    padding: 0.2rem;
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-full);
    background: transparent;
  }

  .nav-link {
    font-family: var(--font-family-secondary);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-secondary);
    text-decoration: none;
    padding: 0.4rem 0.8rem;
    border-radius: var(--border-radius-full);
    transition: all var(--transition-fast);
    font-size: var(--font-size-sm);
  }

  .nav-link:hover,
  .nav-link[aria-current="page"] {
    color: var(--color-text-primary);
    background: var(--color-surface-hover);
  }

  .nav-actions {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
  }

  .nav-actions .btn {
    border-radius: var(--border-radius-full);
    width: 2.2rem;
    height: 2.2rem;
    padding: 0;
  }

  .theme-icon {
    width: 18px;
    height: 18px;
  }

  /* Mobile responsive */
  @media (max-width: 768px) {
    .nav-wrapper {
      padding: 0.65rem 0;
    }

    .nav-links {
      gap: 0;
    }

    .nav-link {
      padding: 0.35rem 0.65rem;
      font-size: var(--font-size-xs);
    }

    .logo-text {
      display: none;
    }
  }
</style>
